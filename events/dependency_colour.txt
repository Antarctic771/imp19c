namespace = dependency_colour

dependency_colour.1 = { # Change to overlord's color
	type = country_event
	title = "dependency_colour.1.t"
	hidden = yes
	
	trigger = {
		is_subject = yes
		NOR = {
			is_subject_type = protectorate
			is_subject_type = tributary
		}
	}

	immediate = {
		if = {
			NOT = {
				has_variable = original_color
			}
			set_variable = {
				name = original_color
				value = THIS.GetMapColor
			}
		}
		change_country_color = overlord.GetMapColor
	}

}

dependency_colour.2 = {
	type = country_event
	title = "dependency_colour.1.t"
	hidden = yes
	
	trigger = {
	}

	immediate = {
		every_country = {
			trigger_event = { id = dependency_colour.1 }
		}
	}

}

dependency_colour.3 = { # Change back to original colour on independence
	type = country_event
	title = "dependency_colour.1.t"
	hidden = yes
	
	trigger = {
		is_subject = no
	}

	immediate = {
		change_country_color = VAR:original_color
	}

}